#!/usr/bin/env python3
"""
Simple Fake Malware for Testing Daemon Console
This will be detected as HIGH RISK by the daemon
"""

import time
import os
import threading
from datetime import datetime

def consume_cpu():
    """High CPU usage to trigger detection"""
    print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ”¥ Starting high CPU consumption...")
    while True:
        # Busy loop - will show high CPU usage
        for i in range(1000000):
            _ = i * i * i
        time.sleep(0.1)

def create_suspicious_files():
    """Create files with suspicious names"""
    print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ“ Creating suspicious files...")
    
    suspicious_files = [
        "ransom_note.txt",
        "encrypted_data.lock",
        "trojan_payload.exe",
        "virus_config.dat"
    ]
    
    test_dir = "F:/MalwareAnalysis/FakeMalware"
    os.makedirs(test_dir, exist_ok=True)
    
    while True:
        for filename in suspicious_files:
            filepath = os.path.join(test_dir, filename)
            with open(filepath, 'w') as f:
                f.write(f"FAKE MALWARE FILE - Created at {datetime.now()}\n")
                f.write("This is completely harmless - just for testing!\n")
            print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ“„ Created: {filename}")
            time.sleep(2)
        time.sleep(10)

def main():
    print("ğŸ¦  FAKE MALWARE TEST PROCESS")
    print("=" * 50)
    print("âš ï¸  THIS IS COMPLETELY HARMLESS!")
    print("Purpose: Test the Process Manager Daemon Console")
    print("Expected: This process should be detected as HIGH RISK")
    print("=" * 50)
    
    # Start suspicious behaviors in background threads
    cpu_thread = threading.Thread(target=consume_cpu, daemon=True)
    file_thread = threading.Thread(target=create_suspicious_files, daemon=True)
    
    cpu_thread.start()
    file_thread.start()
    
    print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸš€ Fake malware started!")
    print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ“Š Check your daemon console - this should be detected!")
    print(f"[{datetime.now().strftime('%H:%M:%S')}] â¹ï¸  Press Ctrl+C to stop")
    
    try:
        while True:
            print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ’€ Fake malware still running... (CPU: HIGH, Files: Creating)")
            time.sleep(15)
    except KeyboardInterrupt:
        print(f"\n[{datetime.now().strftime('%H:%M:%S')}] ğŸ›‘ Fake malware stopped")
        
        # Cleanup
        try:
            import shutil
            test_dir = "F:/MalwareAnalysis/FakeMalware"
            if os.path.exists(test_dir):
                shutil.rmtree(test_dir)
                print(f"[{datetime.now().strftime('%H:%M:%S')}] ğŸ§¹ Cleaned up test files")
        except:
            pass

if __name__ == "__main__":
    main()
